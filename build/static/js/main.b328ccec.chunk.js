(this["webpackJsonpsocial-media-app"]=this["webpackJsonpsocial-media-app"]||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},126:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),s=(a(83),a(13)),o=a(142),i=a(143),u=a(68),m=a(11);a(84);var d=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement(m.b,{to:"/",style:{textDecoration:"none",color:"inherit"}},r.a.createElement("h1",null,"The Social Hub")))},p=a(25),f=a.n(p),E=a(31),b=a(6),h=a(66),v=a.n(h),g=a(65),I=a.n(g),y=a(61),j=a.n(y),N=a(67),O=a.n(N),x=(a(90),a(140)),k=a(8),S=a.n(k),U=(a(100),r.a.createContext());function C(){return Object(n.useContext)(U)}function w(e){var t=e.children,a=Object(n.useState)(),c=Object(b.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(!0),i=Object(b.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){return S.a.auth().onAuthStateChanged((function(e){s(e),m(!1)}))}),[]),Object(n.useEffect)((function(){!l&&S.a.auth().currentUser&&(s(S.a.auth().currentUser),m(!1))}),[]);var d={currentUser:l,login:function(e,t){return S.a.auth().signInWithEmailAndPassword(e,t)},signup:function(e,t){return S.a.auth().createUserWithEmailAndPassword(e,t)},logout:function(){return S.a.auth().signOut()}};return r.a.createElement(U.Provider,{value:d},!u&&t)}var P=S.a.initializeApp({apiKey:"AIzaSyAVVprvC1TxCHJED9meoFYgE17duR9ots0",authDomain:"social-media-app-bc88a.firebaseapp.com",databaseURL:"https://social-media-app-bc88a.firebaseio.com",projectId:"social-media-app-bc88a",storageBucket:"social-media-app-bc88a.appspot.com",messagingSenderId:"490249658371",appId:"1:490249658371:web:f3e37116b24eaaadd4ae36"}).firestore();var L=function(){var e=C(),t=e.currentUser,a=e.logout,c=Object(n.useState)([]),l=Object(b.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(""),d=Object(b.a)(u,2),p=(d[0],d[1]),h=Object(s.f)();function g(){return y.apply(this,arguments)}function y(){return(y=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(""),e.prev=1,e.next=4,a();case 4:h.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),p("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){P.collection("users").where("userId","==",t.uid).onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"sidebar"},o.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"userImage mb-3",style:{textAlign:"center"}},r.a.createElement(x.a,{src:e.data.photo,roundedCircle:!0,style:{textAlign:"center"}})),r.a.createElement("div",{className:"menuOptions d-flex justify-content-center"},r.a.createElement("div",{className:"menuItems"},r.a.createElement(m.b,{to:"/user/".concat(t.uid),style:{textDecoration:"none"}},r.a.createElement(j.a,{fontSize:"large"})," ",e.data.firstName+" "+e.data.lastName),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement(I.a,{fontSize:"large"})," News Feed"),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/messenger",style:{textDecoration:"none"}},r.a.createElement(v.a,{fontSize:"large"})," Messenger"),r.a.createElement("br",null),r.a.createElement(m.b,{onClick:g,style:{textDecoration:"none"}},r.a.createElement(O.a,{fontSize:"large"})," Log Out"))))})))},R=a(145),F=a(147);a(101);var D=function(e){var t=C().currentUser,a=Object(n.useState)(""),c=Object(b.a)(a,2),l=c[0],s=c[1],m=Object(n.useState)(""),d=Object(b.a)(m,2),p=d[0],f=d[1];return r.a.createElement("div",{className:"createPost"},r.a.createElement(o.a,null,r.a.createElement(i.a,null,r.a.createElement(u.a,{md:1,sm:12,className:"mb-2 d-none d-md-block"},r.a.createElement(F.a,{src:t.photoURL})),r.a.createElement(u.a,{md:11,className:"pl-5"},r.a.createElement(R.a,null,r.a.createElement(i.a,null,r.a.createElement(u.a,{md:8,className:"mb-2"},r.a.createElement(R.a.Control,{id:"inputPostText",value:l,onChange:function(e){return s(e.target.value)},placeholder:"Tell us something nice!"})),r.a.createElement(u.a,{md:4,className:"mb-2"},r.a.createElement(R.a.Control,{id:"inputPostImage",value:p,onChange:function(e){return f(e.target.value)},placeholder:"Img URL"})),r.a.createElement("button",{onClick:function(a){a.preventDefault(),P.collection("posts").add({message:l,timestamp:S.a.firestore.FieldValue.serverTimestamp(),profilePic:t.photoURL,userId:t.uid,username:t.displayName,image:p,likes:[],destinationMural:e.destinationMural}),s(""),f("")},type:"submit"},"Invisible button")))),r.a.createElement(u.a,{md:3}))))};a(103);var A=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){P.collection("ads").onSnapshot((function(e){var t=e.docs[Math.floor(Math.random()*e.docs.length)].data().adUrl;c(t)}))}),[]),r.a.createElement("div",{className:"ads"},r.a.createElement("p",null,"Advertise with us!"),r.a.createElement("img",{src:a,alt:""}))},B=a(69),M=a.n(B),T=a(70),q=a.n(T),G=a(41),V=a.n(G);a(104),a(105);var W=function(e){var t=C().currentUser;return r.a.createElement("div",{className:"comment"},r.a.createElement("p",null,r.a.createElement("span",{className:"commentContent"},e.content)," ",e.likes.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{style:{maxWidth:"20px",color:"rgb(0,123,255)"}})," ",e.likes.length):""),r.a.createElement("p",null,r.a.createElement(m.b,{onClick:function(){for(var a=!1,n=e.likes,r=0;r<n.length&&!a;r++)n[r]===t.uid&&(a=!0,n.splice(r,1));a||(n.push(t.uid),e.userId!==t.uid&&P.collection("notifications").add({timestamp:S.a.firestore.FieldValue.serverTimestamp(),senderProfilePic:t.photoURL,senderUserId:t.uid,senderUsername:t.displayName,receiverUserId:e.userId,action:"likeComment",isRead:!1,objectId:e.postId})),P.collection("comments").doc(e.id).update({likes:n})},style:{textDecoration:"none",color:"inherit"}},"Like"," ")," ",e.date&&e.date.toDate().getMonth()+1+"/"+e.date.toDate().getDate()))};var z=function(e){var t=C().currentUser,a=Object(n.useState)(""),c=Object(b.a)(a,2),l=c[0],s=c[1];return r.a.createElement("div",{className:"newComment"},r.a.createElement(R.a,{onSubmit:function(a){a.preventDefault(),""!==l&&(P.collection("comments").add({content:l,date:S.a.firestore.FieldValue.serverTimestamp(),likes:[],postId:e.postId,profilePic:t.photoURL,userId:t.uid,username:t.displayName}),e.userId!==t.uid&&P.collection("notifications").add({timestamp:S.a.firestore.FieldValue.serverTimestamp(),senderProfilePic:t.photoURL,senderUserId:t.uid,senderUsername:t.displayName,receiverUserId:e.userId,action:"commentPost",isRead:!1,objectId:e.postId}),s(""))}},r.a.createElement(i.a,null,r.a.createElement(u.a,{md:12},r.a.createElement(R.a.Control,{id:"addComment_".concat(e.postId),type:"text",placeholder:"Write a comment...",value:l,onChange:function(e){s(e.target.value)}})))))};var _=function(e){var t,a=C().currentUser,c=Object(n.useState)([]),l=Object(b.a)(c,2),s=l[0],d=l[1];return Object(n.useEffect)((function(){P.collection("comments").where("postId","==",e.postId).orderBy("date").onSnapshot((function(e){d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"post"},r.a.createElement(o.a,{className:"postInfo"},r.a.createElement(i.a,null,r.a.createElement(u.a,{md:1,xs:1,className:"mt-1"},r.a.createElement(F.a,{src:e.profilePic})),r.a.createElement(u.a,{md:10,xs:11,className:"pl-5"},r.a.createElement("p",null,e.username),r.a.createElement("p",null,new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString())))),r.a.createElement(o.a,{className:"postContent"},r.a.createElement("p",null,e.message),e.image?r.a.createElement("img",{src:e.image,alt:"Post"}):"",r.a.createElement("div",{className:"noOfLikesAndComments"},r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement("p",null,e.likes.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{style:{maxWidth:"20px",color:"rgb(0,123,255)"}})," ",e.likes.length):"Be the first to like!")),r.a.createElement(u.a,{className:"text-right"},s.length>0?r.a.createElement(r.a.Fragment,null,s.length," comments"):"Be the first to comment!")))),r.a.createElement(o.a,{className:"postLikeComment"},r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement(m.b,{onClick:function(){for(var t=!1,n=e.likes,r=0;r<n.length&&!t;r++)n[r]===a.uid&&(t=!0,n.splice(r,1));t||(n.push(a.uid),e.userId!==a.uid&&P.collection("notifications").add({timestamp:S.a.firestore.FieldValue.serverTimestamp(),senderProfilePic:a.photoURL,senderUserId:a.uid,senderUsername:a.displayName,receiverUserId:e.userId,action:"likePost",isRead:!1,objectId:e.postId})),P.collection("posts").doc(e.postId).update({likes:n})},style:{textDecoration:"none",color:"inherit"}},r.a.createElement(M.a,null)," Like")),r.a.createElement(u.a,null,r.a.createElement(m.b,{onClick:function(){document.getElementById("addComment_".concat(e.postId)).focus()},style:{textDecoration:"none",color:"inherit"}},r.a.createElement(q.a,null)," Comment")))),s.map((function(t){return r.a.createElement(W,{key:t.id,id:t.id,postId:e.postId,userId:e.userId,userName:e.userName,profilePic:e.profilePic,likes:t.data.likes,content:t.data.content,date:t.data.date})})),r.a.createElement(z,{postId:e.postId,userId:e.userId}))};var J=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){P.collection("posts").where("destinationMural","==","public").orderBy("timestamp","desc").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"generalFeed"},a.map((function(e){return r.a.createElement(_,{key:e.id,postId:e.id,userId:e.data.userId,profilePic:e.data.profilePic,message:e.data.message,timestamp:e.data.timestamp,username:e.data.username,image:e.data.image,likes:e.data.likes,comments:e.data.comments})})))};var H=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){P.collection("posts").where("destinationMural","==",e.userId).orderBy("timestamp","desc").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"userMural"},c.map((function(e){return r.a.createElement(_,{key:e.id,postId:e.id,userId:e.data.userId,profilePic:e.data.profilePic,message:e.data.message,timestamp:e.data.timestamp,username:e.data.username,image:e.data.image,likes:e.data.likes,comments:e.data.comments})})))},K=a(146),Y=a(144);a(106);var Q=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=C().login,c=Object(n.useState)(""),l=Object(b.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!1),d=Object(b.a)(u,2),p=d[0],h=d[1],v=Object(s.f)(),g=C().currentUser;function I(){return(I=Object(E.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,i(""),h(!0),n.next=6,a(e.current.value,t.current.value);case 6:v.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),i("Failed to login, please try again.");case 12:h(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"login mx-auto"},g?r.a.createElement("p",null,"User already logged in!"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"text-center mb-4"},"Log In"),o&&r.a.createElement(K.a,{variant:"danger"},o),r.a.createElement(R.a,{className:"center",onSubmit:function(e){return I.apply(this,arguments)}},r.a.createElement(R.a.Group,{id:"email"},r.a.createElement(R.a.Label,null,"Email"),r.a.createElement(R.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(R.a.Group,{id:"password"},r.a.createElement(R.a.Label,null,"Password"),r.a.createElement(R.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(Y.a,{disabled:p,className:"w-100",type:"submit"},"Log In"),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Not yet a user? ",r.a.createElement(m.b,{to:"/signup"},"Sign Up")))))};a(107);var X=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useRef)(),l=Object(n.useRef)(),o=Object(n.useRef)(),i=Object(n.useState)(""),u=Object(b.a)(i,2),d=u[0],p=u[1],h=Object(n.useState)(!1),v=Object(b.a)(h,2),g=v[0],I=v[1],y=Object(s.f)();function j(){return(j=Object(E.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c.current.value===l.current.value){n.next=3;break}return n.abrupt("return",p("Both passwords have to match!"));case 3:return n.prev=3,p(""),I(!0),n.next=8,S.a.auth().createUserWithEmailAndPassword(a.current.value,c.current.value).then((function(n){P.collection("users").doc(n.user.uid).set({userId:n.user.uid,firstName:e.current.value,lastName:t.current.value,photo:o.current.value?o.current.value:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",email:a.current.value,friends:[],requestsReceived:[],requestsSent:[]}),S.a.auth().currentUser.updateProfile({displayName:e.current.value+" "+t.current.value,photoURL:o.current.value?o.current.value:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png"}).then((function(){console.log("Updated successfully")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log("Error when updating")}));case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),p("Failed to create an account");case 13:I(!1),y.push("/");case 15:case"end":return n.stop()}}),n,null,[[3,10]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"signup mx-auto"},r.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),d&&r.a.createElement(K.a,{variant:"danger"},d),r.a.createElement(R.a,{onSubmit:function(e){return j.apply(this,arguments)}},r.a.createElement(R.a.Group,{id:"firstName"},r.a.createElement(R.a.Label,null,"First Name"),r.a.createElement(R.a.Control,{type:"text",ref:e,required:!0})),r.a.createElement(R.a.Group,{id:"lastName"},r.a.createElement(R.a.Label,null,"Last Name"),r.a.createElement(R.a.Control,{type:"text",ref:t,required:!0})),r.a.createElement(R.a.Group,{id:"email"},r.a.createElement(R.a.Label,null,"Email"),r.a.createElement(R.a.Control,{type:"email",ref:a,required:!0})),r.a.createElement(R.a.Group,{id:"photoUrl"},r.a.createElement(R.a.Label,null,"Photo Url (optional)"),r.a.createElement(R.a.Control,{type:"text",ref:o})),r.a.createElement(R.a.Group,{id:"password"},r.a.createElement(R.a.Label,null,"Password"),r.a.createElement(R.a.Control,{type:"password",ref:c,required:!0})),r.a.createElement(R.a.Group,{id:"password-confirm"},r.a.createElement(R.a.Label,null,"Password Confirmation"),r.a.createElement(R.a.Control,{type:"password",ref:l,required:!0})),r.a.createElement(Y.a,{disabled:g,className:"w-100",type:"submit"},"Sign Up")),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Already a user? ",r.a.createElement(m.b,{to:"/login"},"Log In")))};a(108);var Z=function(e){var t=Object(s.f)();return r.a.createElement(i.a,{className:"mb-3"},r.a.createElement(u.a,{className:"d-flex justify-content-md justify-content-center",xl:3,xs:12},r.a.createElement(m.b,{onClick:function(a){a.preventDefault(),t.push("/user/".concat(e.userId))},style:{textDecoration:"none",color:"inherit"}},r.a.createElement(F.a,{src:e.photo,alt:""}))),r.a.createElement(u.a,{className:"mt-2 d-flex justify-content-md justify-content-center",xl:9,xs:12},r.a.createElement(m.b,{to:"/user/".concat(e.userId),style:{textDecoration:"none",color:"inherit"}},e.name)))};a(109);var $=function(){var e=C().currentUser,t=Object(n.useState)([]),a=Object(b.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){P.collection("users").where("userId","!=",e.uid).onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"userList"},r.a.createElement("p",null,"People"),r.a.createElement(o.a,null,c.map((function(e){return r.a.createElement(Z,{key:e.id,userId:e.data.userId,photo:e.data.photo,name:e.data.firstName+" "+e.data.lastName})}))))},ee=a(73);a(110);var te=function(e){var t=C().currentUser,a=Object(n.useState)(""),c=Object(b.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(""),m=Object(b.a)(o,2),d=m[0],p=m[1],f=Object(n.useState)([]),E=Object(b.a)(f,2),h=E[0],v=E[1],g=Object(n.useState)([]),I=Object(b.a)(g,2),y=I[0],j=I[1];return Object(n.useEffect)((function(){P.collection("users").where("userId","!=",t.uid).onSnapshot((function(e){v(e.docs.map((function(e){return{value:e.data().userId,label:e.data().firstName+" "+e.data().lastName}})))}))}),[]),r.a.createElement("div",{className:"newMessage"},r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{className:"basic-single",classNamePrefix:"select",placeholder:"Select or type the name of a friend",isClearable:"true",isSearchable:"true",options:h,onChange:function(e){var a;e?(s(e.value),a=e.value,P.collection("messages").where("senderReceiverId","in",[t.uid+a,a+t.uid]).orderBy("date").onSnapshot((function(e){j(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))):s(""),document.getElementById("messageInputField").focus()}})),r.a.createElement("div",{className:"chatWindow",key:e.userId},y.map((function(e){return r.a.createElement(r.a.Fragment,null,e.data.senderReceiverArray[0]===t.uid?r.a.createElement("p",{style:{textAlign:"right"}},r.a.createElement("span",{className:"messageSent"},e.data.content)):r.a.createElement("p",null,r.a.createElement("span",{className:"messageReceived"},e.data.content)))}))),r.a.createElement(R.a,{onSubmit:function(e){e.preventDefault(),d&&l&&(P.collection("messages").add({content:d,date:S.a.firestore.FieldValue.serverTimestamp(),receiverId:l,senderId:t.uid,senderReceiverId:t.uid+l,senderReceiverArray:[t.uid,l],senderName:S.a.auth().currentUser.displayName,senderPhoto:S.a.auth().currentUser.photoURL}),p(""),document.getElementById("messageInputField").focus())}},r.a.createElement(i.a,null,r.a.createElement(u.a,{md:12},r.a.createElement(R.a.Control,{id:"messageInputField",type:"text",placeholder:"Type your message here...",value:d,onChange:function(e){p(e.target.value)}})))))};a(126);var ae=function(){var e=C().currentUser;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement("div",{className:"app",style:{textDecoration:"none"}},r.a.createElement(d,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/signup",component:X}),r.a.createElement(s.a,{exact:!0,path:"/login",component:Q}),r.a.createElement(o.a,{className:"content"},r.a.createElement(i.a,null,r.a.createElement(u.a,{className:"justify-content",lg:3,md:12,sm:12},r.a.createElement(L,{key:S.a.auth().currentUser})),r.a.createElement(u.a,{lg:6,md:12},r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(D,{destinationMural:"public"}),r.a.createElement(J,null)),r.a.createElement(s.a,{path:"/user/:userId",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{destinationMural:e.match.params.userId}),r.a.createElement(H,{userId:e.match.params.userId,key:e.match.params.userId}))}}),r.a.createElement(s.a,{exact:!0,path:"/messenger"},r.a.createElement(te,null))),r.a.createElement(u.a,{lg:3,md:12},r.a.createElement($,null),r.a.createElement(A,null)))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/signup",component:X})),r.a.createElement(Q,null)))};a(127);l.a.render(r.a.createElement(m.a,null,r.a.createElement(w,null,r.a.createElement(ae,null))),document.getElementById("root"))},78:function(e,t,a){e.exports=a(128)},83:function(e,t,a){},84:function(e,t,a){},90:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.b328ccec.chunk.js.map